<!DOCTYPE html><html lang=ru_RU prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# article: http://ogp.me/ns/article# profile: http://ogp.me/ns/profile# website: http://ogp.me/ns/website#"><head><meta charset=utf-8><title>Блог</title><meta content="text/html; charset=utf-8" http-equiv=Content-Type><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name=viewport><meta content=ZQxszSrlDM3n_Iuke8g6KKUh4v9tfupDbfThdGYwLtc name=google-site-verification><meta content=6b4e465cd4a8c337 name=yandex-verification><meta content=23c6ae084acb2e8247d609e78d9731f601658e6a name=openstat-verification><meta content="Здесь был Алекс" name=application-name><meta content="/images/small.jpg" name=msapplication-square70x70logo><meta content="/images/medium.jpg" name=msapplication-square150x150logo><meta content="wide.jpg" name=msapplication-wide310x150logo><meta content="large.jpg" name=msapplication-square310x310logo><meta name=msapplication-TileColor><meta content="frequency=30;polling-uri=http://notifications.buildmypinnedsite.com/?feed=https://alex.semyonov.us/index.rss&amp;amp;id=1;polling-uri2=http://notifications.buildmypinnedsite.com/?feed=https://alex.semyonov.us/index.rss&amp;amp;id=2;polling-uri3=http://notifications.buildmypinnedsite.com/?feed=https://alex.semyonov.us/index.rss&amp;amp;id=3;polling-uri4=http://notifications.buildmypinnedsite.com/?feed=https://alex.semyonov.us/index.rss&amp;amp;id=4;polling-uri5=http://notifications.buildmypinnedsite.com/?feed=https://alex.semyonov.us/index.rss&amp;amp;id=5; cycle=1" name=msapplication-notification><meta content="Алекс Семёнов" name=author><meta content="Weby/0.0.1 Ruby/2.3.1 (x86_64-linux)" name=generator><meta content="Environment: production" name=debug><meta content="index, follow" name=robots><meta content=213397493136 property="fb:app_id"><meta content=615625395 property="fb:admins"><meta content="Личный сайт Александра Семёнова «Здесь был Алекс»" property="og:description"><meta content=ru_RU property="og:locale"><meta content="https://alex.semyonov.us/images/alsemyonov.jpg" property="og:image"><meta content="Блог" property="og:title"><meta content="https://alex.semyonov.us/blog/" property="og:url"><meta content="@alsemyonov" property="twitter:site"><meta content=summary property="twitter:card"><link href="https://alex.semyonov.us/blog/" rel=canonical type="text/html"><link href="/stylesheets/screen.css" rel=stylesheet /><link href="/images/pavatar.jpg" rel=pavatar type="image/jpeg"><link href="/humans.txt" rel=author type="text/plain"><link href="/favicon.ico" rel=icon type="image/ico"><link href="/favicon.ico" rel="shortcut icon" type="image/ico"><link href="/favicon.ico" rel="shortcut icon" type="image/ico"></head><body class="blog blog_index"><div class=b-root itemscope itemtype="http://schema.org/ItemPage"><header class=b-header><nav class=b-navigation itemscope itemtype="http://schema.org/SiteNavigationElement"><div itemscope itemtype="http://schema.org/ItemList"><span itemprop=itemListElement itemscope itemtype="http://schema.org/ListItem"><a class=b-title href="/" itemprop=url><span itemprop=name>Здесь был Алекс</span></a></span><div class=b-navigation__toggler-wrapper><button class=b-navigation__toggler data-target="#navigation_menu" data-toggle=collapse type=button><i class="fa fa-bars"></i></button></div><div class=b-navigation__menu id=navigation_menu><ul class=b-menu><li class="b-menu__item b-menu__item_cv b-menu__item_cv_index" itemprop=itemListElement itemscope itemtype="http://schema.org/ListItem"><a class=nav-link href="/cv/" itemprop=url><span itemprop=name>CV</span></a></li><li class="b-menu__item b-menu__item_blog b-menu__item_blog_index" itemprop=itemListElement itemscope itemtype="http://schema.org/ListItem"><a class=nav-link href="/blog/" itemprop=url><span itemprop=name>Блог</span></a></li><li class="b-menu__item b-menu__item_software b-menu__item_software_index" itemprop=itemListElement itemscope itemtype="http://schema.org/ListItem"><a class=nav-link href="/software/" itemprop=url><span itemprop=name>ПО</span></a></li></ul></div></div></nav></header><div class=b-contents><header class=b-blog-header itemscope itemtype="http://schema.org/WPHeader" role=banner><div class=b-blog-header__logo><img src="/images/alsemyonov.jpg" width=64 height=64 class="media-object img-circle" itemprop=image alt=Alsemyonov /></div><div class=b-blog-header__titles><h1 class=b-blog-header__title itemprop=headline><a href="/blog">Блог разработчика веба</a></h1><p class=b-blog-header__description itemprop=description>Статьи о веб-разработке и обо всём остальном</p></div></header><div class=b-contents__wrapper><div class=b-blog__main id=main role=main><nav itemscope itemtype="http://schema.org/SiteNavigationElement"><p>Страница 1 из 2</p></nav><ul class=b-articles-list><article class="b-article-excerpt h-entry"><h2 class=b-article-excerpt__title><i class=b-article-status></i><a class="u-url p-name" href="/2015/12/20/manifest.html" rel=canonical>Я-манифест</a></h2><div class=p-content><p>Последние два года я всё чаще слышу, что следует использовать «<em>я-высказывания</em>» для упрощения коммуникации и снижения конфликтности ситуации. На мой субъективный взгляд, это — довольно успешный приём, применение которого действительно позволяет <em>некоторым людям</em> воспринимать информацию <em>проще и приемлемее</em>. Однако, с моей точки зрения, этот приём так же сильно <em>усложняет жизнь и коммуникацию</em> той стороны, которая хочет выразить свои чувства и эмоции, а так же <em>вместо конкретной проблемы</em> выделяет некую <em>абстрактную</em> проблему, которую собеседнику <em>проще воспринять и/или проигнорировать</em>.</p> <p>Я понимаю, что услышать о чужой (моей) проблеме гораздо проще, чем услышать открытое выражение моих эмоций. Некоторым людям гораздо проще воспринять, что у меня есть проблемы, связанные с <em>(дальше можно просто опустить, потому что человек, слышащий о моей проблеме готов, возможно, пожалеть меня, но не очень готов воспринять ту информацию, которую я пытаюсь донести)</em>.</p> <p>Я считаю, что «<em>я-высказывания</em>» не только усложняют коммуникацию, но и делают её более запутанной, более некомфортной для меня, желающего выразить собственное мнение, более сложной для восприятия моим собеседником (потому что вместо конкретной эмоции мне приходится превращать её в нечто абстрактное, удобное и комфортное для восприятия).</p> <p>Отныне и до тех пор, пока я прямо не заявлю иное, я заявляю, что:</p> <ul> <li><p><strong>всё, произносимое мною, является выражением моего личного субъективного мнения, основанного на моём личном опыте и моих личных эмоциях</strong>;</p> </li><li><p><strong>всё, что я произношу вслух, пишу в личной переписке или доношу иными способами передачи информации, является исключительно моим личным субъективным мнением</strong>;</p> </li><li><p><strong>в случае необходимости высказаться от лица некоей группы</strong> (будь то группа людей, находящихся рядом и участвующих в беседе, или организации, представителем которой я являюсь, или более общей группы, включающей в себя некоторое неопределённое количество людей)<strong>, я обязан уточнить отдельно, от лица какой конкретно группы я пытаюсь сейчас говорить</strong> (напр. «как сотрудник ООО „Рога и Копыта“», «как мужчина», «как участник движения „за право на молодость“», «как гражданин Российской Федерации»);</p> </li><li><p><strong>в случае необходимости апеллировать к какому-то конкретному своду правил и или законов, я также обязан уточнить отдельно, на что я ссылаюсь</strong> (напр. «с точки зрения уголовного кодекса Российской Федерации», «исходя из Международной Классификации Болезней 10-го пересмотра»)<strong>.</strong></p> </li></ul> <p>В случае, когда я заявляю что-либо, не указывая свою принадлежность к группе и санкционированное представительство этой группы, либо не ссылаясь на конкретный свод законов или правил, я прошу <strong>считать все мои высказывания моим личным субъективным мнением</strong>.</p> <p>Я приведу конкретные примеры из личной практики:</p> <p>Если я говорю:</p> <ul> <li>«<em>ты неправ</em>», то любителей «<em>я-высказываний</em>» я прошу воспринимать это выражение как «<em>мне кажется неверным высказанное тобой мнение</em>»; </li><li>«<em>ты поступил неправильно</em>» — «<em>мне кажется, что поступать подобным образом неправильно</em>»; </li><li>«<em>ты делаешь мне неприятно</em>» — «<em>мне неприятно, когда люди поступают со мной подобным образом</em>»; </li><li>«<em>ты постоянно не слушаешь меня</em>» — «<em>я испытываю сильный дискомфорт от того, что ощущаю, что моя речь постоянно не воспринимается собеседником</em>». </li></ul> <p>Сравните, пожалуйста фразы слева и справа. Я слышал определение «<em>я-высказываний</em>», как «<em>открытого выражения эмоций</em>», но по факту я вижу, что то, что ощущается — <strong>то, что хочется высказать открыто</strong> — приходится завуалировать в формулу, которая позволяет моему собеседнику воспринять информацию, которую я хочу открыто донести до него, <strong>говоря от первого лица и выражая моё личное мнение</strong>, в <em>удобной, комфортной, смягчённой и обобщённой</em> форме. То есть <strong>вместо открытого выражения эмоций</strong>, я должен <em>использовать специальную формулу</em>, позволяющую моему собеседнику воспринять это сообщение:</p> <ul> <li>как <strong>не относящееся к нему лично</strong>, хотя моя эмоция вызвана <strong>конкретно этим собеседником</strong>, </li><li>как нечто <strong>более мягкое</strong>, чем я испытываю, хотя я испытываю <strong>ровно то, что говорю</strong>, </li><li>как нечто, относящееся к <strong>широкому кругу людей</strong>, хотя эта эмоция вызвана <strong>конкретно этим человеком</strong>, а в случае общения с другим собеседником я могу испытывать совсем другие эмоции, </li><li>как <strong>нечто абстрактное</strong>, хотя эта эмоция вызвана <strong>конкретными действиями</strong> моего конкретного собеседника. </li></ul> <p>Поэтому отныне и впредь, пока не сказано иное, <strong>я буду выражать свои эмоции так, как я их чувствую</strong>, а не так, как будет проще воспринять моему собеседнику. И это будет <strong>открытое выражение моих личных субъективных эмоций</strong>, а не <em>завуалированная и усложнённая по определённой формуле попытка показать что-то неконкретное, что, якобы, может быть вызвано кем угодно при общении со мной</em>.</p> <p>Всё вышесказанное является <strong>моим личным субъективным мнением</strong>. Я прошу воспринимать все мои последующие высказывания <em>в соответствии с этим манифестом</em>, который я обозначу как «<strong>я-манифест</strong>».</p> </div><p class=b-article-excerpt__meta><span itemprop=author itemscope itemtype="http://schema.org/Person">© <a href="https://alex.semyonov.us/about/#me" itemprop=url><span itemprop=name>Алекс Семёнов</span></a>, </span><time class=dt-published datetime="2015-12-20T00:00:00+03:00">20 декабря 2015</time></p></article><article class="b-article-excerpt h-entry"><h2 class=b-article-excerpt__title><i class=b-article-status></i><a class="u-url p-name" href="/2009/11/25/artlebedev-typograf-ruby-on-rails.html" rel=canonical>Ставим рубиновый типограф на Рельсы</a></h2><div class=p-content><p>В продолжение <a href="../../24/artlebedev-typograf-ruby">вчерашней темы</a>, добавил простой способ типографить избранные поля в модели ActiveRecord.</p> <p>Достаточно написать в нужной модели примерно следующее:</p> <pre><code class="ruby">class Article &lt; ActiveRecord::Base
  typograf :title, use_p: false, use_br: false
  typograf :content, :teaser
end
</code></pre> <p>И тогда каждый раз перед сохранением (конкретнее, перед проверкой правильности полей) будет проходить типографирование этих полей, посредством Типографа студии Артемия Лебедева.</p> <p>Поддерживается <a href="http://www.rubydoc.info/gems/als_typograf">несколько возможных синтаксисов</a> объявления моделей для типографирования:</p> <ul> <li><p>для одного конкретного поля:</p> <pre><code class="ruby">typograf :content
</code></pre> </li><li><p>можно указать параметры для типографирования этого поля:</p> <pre><code class="ruby">typograf :content, entity_type: AlsTypograf::NO_ENTITIES
</code></pre> </li><li><p>для нескольких полей сразу (тоже с возможностью объявить параметры типографирования, общие для всех объявленных полей):</p> <pre><code class="ruby">typograf :skills, :achievements, :additional,
         use_br: false,
         use_p: true
</code></pre> </li><li><p>для нескольких полей сразу (но с объявлением параметров для каждого конкретного поля):</p> <pre><code class="ruby">typograf foo: {entity_type: AlsTypograf::HTML_ENTITIES},
         bar: {use_p: true, use_br: false},
         baz: {max_nobr: 5},
         some_other_field_name: {}
</code></pre> </li></ul> <p>Все эти варианты могут комбинироваться друг с другом внутри одной модели произвольное количество раз (но если параметры типографирования для одного и того же поля были указаны в вызовах несколько раз, будут применяться только последние).</p> </div><p class=b-article-excerpt__meta><span itemprop=author itemscope itemtype="http://schema.org/Person">© <a href="https://alex.semyonov.us/about/#me" itemprop=url><span itemprop=name>Алекс Семёнов</span></a>, </span><time class=dt-published datetime="2009-11-25T08:08:00+03:00">25 ноября 2009</time></p></article><article class="b-article-excerpt h-entry"><h2 class=b-article-excerpt__title><i class=b-article-status></i><a class="u-url p-name" href="/2009/11/24/artlebedev-typograf-ruby.html" rel=canonical>Типограф студии Артемия Лебедева с отблеском Рубина</a></h2><div class=p-content><p>Понадобилось мне <a href="http://www.artlebedev.ru/kovodstvo/sections/62/">типографировать тексты</a>, добавляемые в админке одного из приложений. Поиск в интернете ни одного годного типографа на Ruby не показал. Зато, я вспомнил, что студия Артемия Лебедева позволяет типографировать тексты с помощью их <a href="http://www.artlebedev.ru/tools/typograf/webservice/">веб-сервиса</a>. Поэтому, я написал <a href="https://github.com/alsemyonov/als_typograf" title=AlsTypograf>маленькую обёртку к их сервису</a>.</p> <p>Пользоваться очень просто.</p> <ul> <li><p>Установите:</p> <pre><code class="bash">gem install als_typograf
</code></pre> </li><li><p>В коде приложения используйте метод <code>process</code> модуля <code>AlsTypograf</code> следующим образом:</p> <pre><code class="ruby">require &#39;als_typograf&#39;
AlsTypograf.process(&#39;- Это что, &quot;Типограф&quot;?&#39;) # &quot;&lt;p&gt;— Это что, «Типограф»?&lt;/p&gt;&quot;
</code></pre> </li></ul> <p>Обёртка поддерживает несколько опций, предоставляемых веб-сервисом Студии, их можно подставлять как к конкретному запросу:</p> <pre><code class="ruby">AlsTypograf.process(&#39;- Это что, &quot;Типограф&quot;?&#39;, use_p: false, use_br: true)
</code></pre> <p>так и выставлять глобально, для всех запросов на типографирование:</p> <pre><code class="ruby">AlsTypograf.encoding = 'CP1251' # По-умолчанию используется кодировка UTF-8
AlsTypograf.html_entities! # Заставляет использовать сущности HTML, такие как: &amp;nbsp;, &amp;mdash; &amp;hellip;</code></pre> <p><a href="http://www.rubydoc.info/github/alsemyonov/als_typograf">Документация для рубинового типографа</a> хранится (и автоматически обновляется при любых изменениях) на сервисе <a href="http://www.rubydoc.info/">rubydoc.info</a>, который весьма рекомендую всем разработчикам.</p> </div><p class=b-article-excerpt__meta><span itemprop=author itemscope itemtype="http://schema.org/Person">© <a href="https://alex.semyonov.us/about/#me" itemprop=url><span itemprop=name>Алекс Семёнов</span></a>, </span><time class=dt-published datetime="2009-11-24T06:06:00+03:00">24 ноября 2009</time></p></article><article class="b-article-excerpt h-entry"><h2 class=b-article-excerpt__title><i class=b-article-status></i><a class="u-url p-name" href="/2009/09/30/ruby-metaprogramming.html" rel=canonical>Метапрограммирование в Ruby</a></h2><div class=p-content><h2>Что такое метапрограммирование?</h2> <blockquote> <p>Metaprogramming is the writing of computer programs that write or manipulate other programs (or themselves) as their data, or that do part of the work at compile time that would otherwise be done at runtime. In many cases, this allows programmers to get more done in the same amount of time as they would take to write all the code manually, or it gives programs greater flexibility to efficiently handle new situations without recompilation. (via Wikipedia)</p> </blockquote> <p>Это руководство перечисляет все стандартные методы Ruby, используемые для метапрограммирования, а так же приводит примеры их обычного употребления. В конце мы получим пример использования метапрограммирования для динамического создания классов, соответствующих таблицам в БД, включающих методы, соответствующие полям таблицы, на манер <code>ActiveRecord</code>.</p> <h2>Инструментарий метапрограммиста</h2> <p>Ruby содержит множество методов для динамического создания кода. Ознакомимся с ними:</p> <h3>Получение, установка и удаление переменных</h3> <ul> <li><a href="http://www.rubydoc.info/stdlib/core/Object#instance_variable_get-instance_method"><code>Object#instance_variable_get</code></a> </li><li><a href="http://www.rubydoc.info/stdlib/core/Object#instance_variable_set-instance_method"><code>Object#instance_variable_set</code></a> </li><li><a href="http://www.rubydoc.info/stdlib/core/Object#remove_instance_variable-instance_method"><code>Object#remove_instance_variable</code></a> </li><li><a href="http://www.rubydoc.info/stdlib/core/Module#class_variable_get-instance_method"><code>Module#class_variable_get</code></a> </li><li><a href="http://www.rubydoc.info/stdlib/core/Module#class_variable_set-instance_method"><code>Module#class_variable_set</code></a> </li><li><a href="http://www.rubydoc.info/stdlib/core/Module#remove_class_variable-instance_method"><code>Module#remove_class_variable</code></a> </li></ul> <h3>Получение, установка и удаление констант (и классов)</h3> <ul> <li><a href="http://www.rubydoc.info/stdlib/core/Module#const_get-instance_method"><code>Module#const_get</code></a> </li><li><a href="http://www.rubydoc.info/stdlib/core/Module#const_set-instance_method"><code>Module#const_set</code></a> </li><li><a href="http://www.rubydoc.info/stdlib/core/Module#remove_const-instance_method"><code>Module#remove_const</code></a> </li></ul> <h3>Объявление и удаление методов</h3> <ul> <li><a href="http://www.rubydoc.info/stdlib/core/Module#define_method-instance_method"><code>Module#define_method</code></a> </li><li><a href="http://www.rubydoc.info/stdlib/core/Module#remove_method-instance_method"><code>Module#remove_method</code></a> </li></ul> <h3>Выполнение кода, построенного «на лету»</h3> <ul> <li><a href="http://www.rubydoc.info/stdlib/core/Object#send-instance_method"><code>Object#send</code></a> </li><li><a href="http://www.rubydoc.info/stdlib/core/Object#instance_eval-instance_method"><code>Object#instance_eval</code></a> </li><li><a href="http://www.rubydoc.info/stdlib/core/Module#module_eval-instance_method"><code>Module#module_eval</code></a> (синоним <a href="http://www.rubydoc.info/stdlib/core/Module#class_eval-instance_method"><code>Module#class_eval</code></a>) </li><li><a href="http://www.rubydoc.info/stdlib/core/Kernel#eval-instance_method"><code>Kernel#eval</code></a> </li><li><a href="http://www.rubydoc.info/stdlib/core/Kernel#method_missing-instance_method"><code>Kernel#method_missing</code></a> </li></ul> <h3>Методы интроспекции (рефлексии, отражения)</h3> <p>Интроспекция — важная часть метапрограммирования, позволяющая изучать объекты, получая их структуру и данные</p> <ul> <li><a href="http://www.rubydoc.info/stdlib/core/Object#class-instance_method"><code>Object#class</code></a> </li><li><a href="http://www.rubydoc.info/stdlib/core/Object#instance_variables-instance_method"><code>Object#instance_variables</code></a> </li><li><a href="http://www.rubydoc.info/stdlib/core/Object#methods-instance_method"><code>Object#methods</code></a> </li><li><a href="http://www.rubydoc.info/stdlib/core/Object#private_methods-instance_method"><code>Object#private_methods</code></a> </li><li><a href="http://www.rubydoc.info/stdlib/core/Object#public_methods-instance_method"><code>Object#public_methods</code></a> </li><li><a href="http://www.rubydoc.info/stdlib/core/Object#singleton_methods-instance_method"><code>Object#singleton_methods</code></a> </li><li><a href="http://www.rubydoc.info/stdlib/core/Module#class_variables-instance_method"><code>Module#class_variables</code></a> </li><li><a href="http://www.rubydoc.info/stdlib/core/Module#constants-instance_method"><code>Module#constants</code></a> </li><li><a href="http://www.rubydoc.info/stdlib/core/Module#included_modules-instance_method"><code>Module#included_modules</code></a> </li><li><a href="http://www.rubydoc.info/stdlib/core/Module#instance_methods-instance_method"><code>Module#instance_methods</code></a> </li><li><a href="http://www.rubydoc.info/stdlib/core/Module#name-instance_method"><code>Module#name</code></a> </li><li><a href="http://www.rubydoc.info/stdlib/core/Module#private_instance_methods-instance_method"><code>Module#private_instance_methods</code></a> </li><li><a href="http://www.rubydoc.info/stdlib/core/Module#protected_instance_methods-instance_method"><code>Module#protected_instance_methods</code></a> </li><li><a href="http://www.rubydoc.info/stdlib/core/Module#public_instance_methods-instance_method"><code>Module#public_instance_methods</code></a> </li></ul> <h2>Выполнение кода в строках и блоках</h2> <p>Вы могли слышать о методе eval, позволяющем выполнять строку или блок как код на Ruby. Когда нужно выполнить код внутри контекста какого-то объекта, можно использовать методы <code>instance_eval</code> и <code>module_eval</code> (синоним <code>class_eval</code>).</p> <p>Метод <code>instance_eval</code> выполняет код в контексте существующего объекта.</p> <pre><code class="ruby">[1, 2, 3, 4].instance_eval(&#39;size&#39;) # вернёт 4
</code></pre> <p>В примере мы передали методу <code>instance_eval</code> строку <code>&#39;size&#39;</code>, что интерпретировалось как получение метода <code>:size</code> массивом. Это эквивалентно следующему вызову:</p> <pre><code class="ruby">[1, 2, 3, 4].size
</code></pre> <p>Кроме того, вы можете передавать методу <code>instance_eval</code> блок.</p> <pre><code class="ruby"># Получаем среднее арифметическое чисел в массиве
[1, 2, 3, 4].instance_eval { inject(:+) / size.to_f } # вернёт 2.5
</code></pre> <p>Методы <code>inject(:+)</code> и <code>size.to_f</code> вроде бы «висят в воздухе» и не относятся ни к какому объекту, однако они выполняются в блоке, в контексте объекта, поэтому они интерпретируются как <code>self.inject(:+)</code> и <code>self.size.to_f</code> где <code>self</code> — наш массив.</p> <p>В то время как <code>instance_eval</code> выполняет код в контексте объекта, метод <code>module_eval</code> выполняет код в контексте модуля или класса.</p> <pre><code class="ruby">Fixnum.module_eval do
  def to_word
    if (0..3).include? self
      [&#39;ничего&#39;, &#39;один&#39;, &#39;пара&#39;, &#39;несколько&#39;][self]
    elsif self &gt; 3
      &#39;много&#39;
    elsif self &lt; 0
      &#39;отрицательно&#39;
    end
  end
end
1.to_word # вернёт &#39;один&#39;
2.to_word # вернёт &#39;пара&#39;
</code></pre> <p>Мы видим, как <code>module_eval</code> заново открывает существующий класс <code>Fixnum</code> и добавляет в него новый метод. Само по себе это не очень интересно, и мы можем сделать это иначе:</p> <pre><code class="ruby">class Fixnum
  def to_word
    # ...
  end
end
</code></pre> <p>Лучшее применение этому методу мы найдём при динамическом генерировании кода. Добавим метод <code>create_multiplier</code>, который позволит динамически генерировать методы-умножители с теми именами, которые вы захотите.</p> <pre><code class="ruby">class Fixnum
  def self.create_multiplier(name, num)
    module_eval &quot;def #{name}; self * #{num}; end&quot;
  end
end

Fixnum.create_multiplier(&#39;multiply_by_pi&#39;, Math::PI)
4.multiply_by_pi # вернёт 12.5663706143592 
</code></pre> <p>Пример выше создаёт метод класса (или «метод-синглетон») <code>create_multiplier</code>, с помощью которого мы сможем создавать методы, применимые к любому объекту класса <code>Fixnum</code>.</p> <h2>Использование <code>send</code></h2> <p>Метод <code>send</code> работает почти как <code>instance_eval</code>, поскольку вызывает метод объекта, переданный в качестве параметра. Он удобен, когда мы динамически получаем имя необходимого метода в виде строки или символа.</p> <pre><code class="ruby">method_name = &#39;size&#39;
[1, 2, 3, 4].send(method_name) # вернёт 4
</code></pre> <p>Мы можем передать имя метода в виде строки <code>&#39;size&#39;</code> или символа <code>:size</code></p> <p>Полезное свойство метода <code>send</code> — возможность вызывать приватные методы, как например метод <a href="http://www.rubydoc.info/stdlib/core/Module#define_method-instance_method"><code>Module#define_method</code></a>.</p> <pre><code class="ruby">Array.define_method(:ducky) { puts &#39;ducky&#39; }
# NoMethodError: private method `define_method&#39; called for Array:Class
</code></pre> <p>Используя <code>send</code> получаем:</p> <pre><code class="ruby">Array.send(:define_method, :ducky) { puts &#39;ducky&#39; }
</code></pre> <h2>Создание методов</h2> <p>Как мы видим в примере выше, мы можем создавать методы классов с помощью <code>define_method</code>.</p> <pre><code class="ruby">class Array
  define_method(:multiply) do |arg|
    collect { |i| i * arg }
  end
end

[1, 2, 3, 4].multiply(16) # returns [16, 32, 48, 64]
</code></pre> <h2>method_missing</h2> <p>Метод <code>method_missing</code>, объявленный в классе, вызывается в случае получения экземпляром класса несуществующего метода. Это может быть использовано для выполнения этих отсутвующих методов, вместо отправки ошибки <code>NoMethodError</code>.</p> <pre><code class="ruby">class Fixnum
  def method_missing(meth)
    method_name = meth.id2name
    if method_name =~ /^multiply_by_(\d+)$/
      self * $1.to_i
    else
      raise NoMethodError, &quot;undefined method `#{method_name}&#39; for #{self}:#{self.class}&quot;
    end
  end
end

16.multiply_by_64 # вернёт 1024
16.multiply_by_x # ошибка NoMethodError
</code></pre> <h2>Как работает метод <code>attr_accessor</code>?</h2> <p>Многие из нас используют <code>attr_accessor</code> в классах, однако не все понимают, какую работу он за нас выполняет. <code>attr_accessor</code> динамически генерирует <em>getter</em> и <em>setter</em> для переменной экземпляра. Давайте посмотрим на примере.</p> <pre><code class="ruby">class Person
  attr_accessor :first_name
end

john = Person.new
john.first_name = &#39;John&#39;
john.instance_variables # вернёт [&quot;@first_name&quot;]
john.methods.grep /first_name/ # вернёт [&quot;first_name&quot;, &quot;first_name=&quot;]
</code></pre> <p>Также мы видим, что <code>attr_accessor</code> создаёт переменную экземпляра <code>@first_name</code> и два метода: <em>getter</em> <code>first_name</code>и <em>setter</em> <code>first_name=</code>.</p> <h3>Реализация</h3> <p>Все классы наследуют методы <code>Module</code>, поэтому мы поместим методы сюда.</p> <pre><code class="ruby">class Module
  # First using define_method
  def attr1(symbol)
    instance_var = (&#39;@&#39; + symbol.to_s)
    define_method(symbol) { instance_variable_get(instance_var) }
    define_method(symbol.to_s + &quot;=&quot;) { |val| instance_variable_set(instance_var, val) }
  end

  # Second using module_eval
  def attr2(symbol)
    module_eval &quot;def #{symbol}; @#{symbol}; end&quot;
    module_eval &quot;def #{symbol}=(val); @#{symbol} = val; end&quot;
  end
end

class Person
  attr1 :name
  attr2 :phone
end

person = Person.new
person.name = &#39;John Smith&#39;
person.phone = &#39;555-2344&#39;
person # returns
</code></pre> <p><code>define_method</code> и <code>module_eval</code> оба вернут один и тот же результат.</p> <h2>Пример использования: Active Record для бедных</h2> <p>Те, кто знаком с Ruby on Rails, уже догадываются, как можно реализовать класс <code>ActiveRecord</code>, который пройдётся по полям таблицы и добавит классу соответствующие методы <em>getter</em> и <em>setter</em> для полей таблицы.</p> <p>Мы можем пойти дальше и динамически создать классы, соответствующие таблицам.</p> <p>В этом примере мы создадим <code>ActiveRecord</code> для бедных. Этот класс соединится с базой данных MySQL, создаст динамически классы, соответствующие каждой таблице, а так же наполнит эти классы методами <em>getter</em> и <em>setter</em>, соответсвующими полям таблицы.</p> <pre><code class="ruby">require &#39;rubygems&#39;
require &#39;mysql&#39;

class PoorMan
  # сохраним список сгенерированных классов в переменной класса
  class &lt;&lt; self; attr_reader :generated_classes; end
  @generated_classes = []

  def initialize(attributes = nil)
    if attributes
      attributes.each_pair do |key, value|
        instance_variable_set(&#39;@&#39; + key, value)
      end
    end
  end

  def self.connect(host, user, password, database)
    @@db = Mysql.new(host, user, password, database)

    # пройдёмся по списку таблиц и создадим классы для них
    @@db.list_tables.each do |table_name|
      class_name = table_name.split(&#39;_&#39;).collect { |word| word.capitalize }.join

      # создаём класс для таблицы, используя Module#const_set
      @generated_classes &lt;&lt; klass = Object.const_set(class_name, Class.new(PoorMan))
      klass.module_eval do
        @@fields = []
        @@table_name = table_name

        def fields; @@fields; end
      end

      # пройдёмся по списку полей таблицы и создадим методы getter и setter для них
      @@db.list_fields(table_name).fetch_fields.each do |field|
        # добавляем getter и setter
        klass.send :attr_accessor, field.name

        # добавляем имя поля в список полей
        klass.module_eval { @@fields &lt;&lt; field.name }
      end
    end
  end

  # получаем строку таблицы по идентификатору
  def self.find(id)
    result = @@db.query(&quot;select * from #{@@table_name} where id = #{id} limit 1&quot;)
    attributes = result.fetch_hash
    new(attributes) if attributes
  end

  # получаем все строки
  def self.all
    result = @@db.query(&quot;select * from #{@@table_name}&quot;)
    found = []
    while(attributes = result.fetch_hash) do
      found &lt;&lt; new(attributes)
    end
    found
  end
end

# соединяем класс PoorMan с базой данных, всё остальное он сделает самостоятельно
PoorMan::connect(&#39;host&#39;, &#39;user&#39;, &#39;password&#39;, &#39;database&#39;)

# печатаем список сгенерированных классов
p PoorMan::generated_classes

# получаем пользователя с идентификатором 1
user = Users.find(1)

# получаем всех пользователей
Users.all
</code></pre> <p>Оригинал статьи: <a href="http://weare.buildingsky.net/2009/08/25/rubys-metaprogramming-toolbox">Ruby’s metaprogramming toolbox</a>, автор — Corban Brook</p> <p>Некоторые примеры могут не работать на Ruby &lt; 1.8.7</p> </div><p class=b-article-excerpt__meta><span itemprop=author itemscope itemtype="http://schema.org/Person">© <a href="https://alex.semyonov.us/about/#me" itemprop=url><span itemprop=name>Алекс Семёнов</span></a>, </span><time class=dt-published datetime="2009-09-30T13:01:00+04:00">30 сентября 2009</time></p></article><article class="b-article-excerpt h-entry"><h2 class=b-article-excerpt__title><i class=b-article-status></i><a class="u-url p-name" href="/2009/09/15/tinymce-integration-ruby-on-rails.html" rel=canonical>Интеграция WYSiWYG-редактора TinyMCE в рельсовые приложения</a></h2><div class=p-content><p>Вчера закончил работу (ну, её было не очень много) по переделыванию <a href="http://github.com/kete/tiny_mce" title="Плагин TinyMCE для Ruby on Rails">плагина TinyMCE для рельсов</a> в <a href="http://gemcutter.org/gems/tiny_mce" title="гем tiny_mce на GemCutter">полноценный gem</a>. <span style="background-color: #ffffff;">Теперь редактировать текстовые данные в рельсовых приложениях ещё проще.</span></p> <p>Достаточно вставить в <code>environment.rb</code>:</p> <pre><code class="ruby">config.gem &#39;tiny_mce&#39;, source: &#39;http://gemcutter.org/&#39;
</code></pre> <p>В нужный <em>контроллер</em>:</p> <pre><code class="ruby">uses_tiny_mce only: [:new, :create, :edit, :update]
</code></pre> <p>В <em>обёртку</em>:</p> <pre><code class="ruby">include_tiny_mce_if_needed
</code></pre> <p>А в <em>представлении</em> указать у нужного поля текста класс <code>mceEditor</code>:</p> <pre><code class="ruby"> form_for @page do |f|
  f.text_area :content, class: &#39;mceEditor&#39;
 end
</code></pre> <p>После этого остановите свой проект, наберите в командной строке <code>rake gems:install</code>, запустите проект снова — файлы для TinyMCE автоматически установятся в нужное место. Если вы обновите гем (например, в связи с обновлением кода TinyMCE его авторами) — удалите <code>public/javascript/tiny_mce</code>, перезапустите приложение и новые файлы лягут в нужное место.</p> <p>Всё, теперь пользователи вашего сайта смогут вытворять всякие ужасы с текстом, а так же рвать вашу вёрстку и делать прочие непотребности. <em>Наслаждайтесь!</em></p> <h2>Ссылки проекта:</h2> <ul> <li><a href="http://github.com/krasivotokak/tiny_mce" title="tiny_mce на ГитХабе">Код</a> </li><li><a href="http://rdoc.info/projects/krasivotokak/tiny_mce/" title="tiny_mce на RDoc">Документация</a> </li></ul> </div><p class=b-article-excerpt__meta><span itemprop=author itemscope itemtype="http://schema.org/Person">© <a href="https://alex.semyonov.us/about/#me" itemprop=url><span itemprop=name>Алекс Семёнов</span></a>, </span><time class=dt-published datetime="2009-09-15T20:08:00+04:00">15 сентября 2009</time></p></article><article class="b-article-excerpt h-entry"><h2 class=b-article-excerpt__title><i class=b-article-status></i><a class="u-url p-name" href="/2009/08/03/setup-py-uninstall.html" rel=canonical>Удаление программ с помощью setup.py</a></h2><div class=p-content><p>Некоторые программы написанные на Питоне (например, <a href="https://fedorahosted.org/lekhonee/">Lekhonee</a>) поставляются с файликом <a title="The Setup Script" href="http://docs.python.org/distutils/setupscript.html">setup.py</a>, с помощью которого довольно просто устанавливаются <pre><code class="bash">python setup.py build
sudo python setup.py install</code></pre> А вот удалить такую программу достаточно сложно, ибо команды <code class=bash>sudo python setup.py uninstall</code> нету. Ну, не предусмотрели его любители красивого кода на питоне. Красивое, ведь, лучше, чем некрасивое, ага? А код на Питоне, видимо, настолько красивый, что удалять его со своего компьютера — грех смертный.</p> <p>Тем не менее, способ удаления таких программ есть, и он довольно прост: <pre><code class="bash">sudo python setup.py install --record files.txt
cat files.txt | sudo xargs rm -rf
</code></pre> На самом деле, неприятно удивляет это питоновское стандартное средство установки программ. Но, оказывается, бывает и такое. <h2>А если подумать перед установкой…</h2> …то можно использовать уже упоминавшийся в блоге checkinstall: <pre><code class="bash">sudo checkinstall python setup.py install</code></pre> Тогда деинсталлировать это приложение можно будет как обычно, с помощью apt: <pre><code class="bash">sudo apt-get purge lekhonee</code></pre></p> </div><p class=b-article-excerpt__meta><span itemprop=author itemscope itemtype="http://schema.org/Person">© <a href="https://alex.semyonov.us/about/#me" itemprop=url><span itemprop=name>Алекс Семёнов</span></a>, </span><time class=dt-published datetime="2009-08-03T21:09:00+04:00">03 августа 2009</time></p></article><article class="b-article-excerpt h-entry"><h2 class=b-article-excerpt__title><i class=b-article-status></i><a class="u-url p-name" href="/2009/06/16/ubuntu-price.html" rel=canonical>Сколько стоит Ubuntu?</a></h2><div class=p-content><p>Да, я знаю что Ubuntu распространяется бесплатно. Сегодня меня заинтересовало другое.</p> <p>Сколько стоила бы аналогичная система, построенная из платных аналогов.</p> <p>Посмотрим, что мы получаем в комплекте с Ubuntu:</p> <ul> <li>операционную систему на базе ядра GNU/Linux; </li><li>приятную, расширяемую и настраиваемую графическую оболочку; </li><li>набор Офисных приложений: <ul> <li>редактор текстов (который в платных аналогах любят называть текстовым процессором); </li><li>приложение электронных таблиц; </li><li>редактор презентаций; </li><li>мощное приложение для ведения переписки, календаря и заметок + ещё одно, исключительно для заметок но более удобное; </li></ul> </li><li>два графических редактора: растровый и векторный; </li><li>кучу игрушек и прочих приятных мелочей. </li></ul> <p>Внушительный список, не правда ли? Сколько вы готовы заплатить за такой набор? А теперь посчитаем, что нам предлагают производители коммерческого <abbr title="Программное обеспечение">ПО</abbr>:</p> <table><thead> <tr> <th>Тип <abbr title="Программное обеспечение">ПО</abbr></th> <th>Ubuntu</th> <th style="text-align: right"></th> <th>Windows</th> <th style="text-align: right"></th> <th>OS X</th> <th style="text-align: right"></th> </tr> </thead><tbody> <tr> <td>Ядро системы</td> <td>GNU/Linux</td> <td style="text-align: right">$0,00</td> <td>Windows Vista Home Premium</td> <td style="text-align: right">$239,95<sup id=fnref1><a href="#fn1" rel=footnote>1</a></sup></td> <td>OS X 1.5.6</td> <td style="text-align: right">$129,00</td> </tr> <tr> <td>Офисный пакет</td> <td>OpenOffice, Evolution или KOffice, Kontact</td> <td style="text-align: right">$0,00</td> <td>Office Home and Student 2007</td> <td style="text-align: right">$149,95<sup id=fnref2><a href="#fn2" rel=footnote>2</a></sup></td> <td>iWork 09</td> <td style="text-align: right">$79,00</td> </tr> <tr> <td>Растровый графический редактор</td> <td>GIMP или Krita (из KOffice)</td> <td style="text-align: right">$0,00</td> <td>Adobe Photoshop CS4</td> <td style="text-align: right">$699,00</td> <td>Adobe Photoshop CS4</td> <td style="text-align: right">$699,00</td> </tr> <tr> <td>Векторный графический редактор</td> <td>Draw (из OpenOffice), Inkscape или Karbon (из KOffice)</td> <td style="text-align: right">$0,00</td> <td>Adobe Illustrator CS4</td> <td style="text-align: right">$599,00</td> <td>Adobe Illustrator CS4</td> <td style="text-align: right">$599,00</td> </tr> <tr> <td>Итого:</td> <td></td> <td style="text-align: right">$0,00</td> <td></td> <td style="text-align: right">$1687,45</td> <td></td> <td style="text-align: right">$1506,00</td> </tr> </tbody></table> <p>Берём среднее арифметическое от стоимости комплектов под Windows и OS X и получаем $1596,725.</p> <p>Можно сколько угодно говорить о неточном соответствии возможностей тех или иных программ, представленных в сравнении, однако потребности большинства пользователей «ВКонтакте» и «Одноклассников» Ubuntu легко покрывает.</p> <p>У меня нету лишних полутора тысяч долларов, которые я отдал бы за ту толику функциональности, которая не предоставлена бесплатными аналогами. А вы?</p> <div class=footnotes> <hr> <ol> <li id=fn1> <p>На русском сайте корпорации Microsoft найти цену на какие-либо продукты <em>нереально</em>!&nbsp;<a href="#fnref1" rev=footnote>&#8617;</a></p> </li> <li id=fn2> <p>См. <sup id=fnref1><a href="#fn1" rel=footnote>1</a></sup>&nbsp;<a href="#fnref2" rev=footnote>&#8617;</a></p> </li> </ol> </div> </div><p class=b-article-excerpt__meta><span itemprop=author itemscope itemtype="http://schema.org/Person">© <a href="https://alex.semyonov.us/about/#me" itemprop=url><span itemprop=name>Алекс Семёнов</span></a>, </span><time class=dt-published datetime="2009-06-16T04:04:00+04:00">16 июня 2009</time></p></article><article class="b-article-excerpt h-entry"><h2 class=b-article-excerpt__title><i class=b-article-status></i><a class="u-url p-name" href="/2009/04/21/rotuka-ubuntu-russian-translators.html" rel=canonical>rotuka @ Ubuntu Russian Translators</a></h2><div class=p-content><p>Сегодня пришло письмо, что <a href="http://launchpad.net/~rotuka">меня</a> утвердили в <a href="https://launchpad.net/~ubuntu-l10n-ru">группе переводчиков Ubuntu на русский</a>. Приятно.</p> <p>И я даже отличился в свежевыходящем Зайцелопе. В апплете-индикаторе новых сообщений я указан, как один из переводчиков.</p> </div><p class=b-article-excerpt__meta><span itemprop=author itemscope itemtype="http://schema.org/Person">© <a href="https://alex.semyonov.us/about/#me" itemprop=url><span itemprop=name>Алекс Семёнов</span></a>, </span><time class=dt-published datetime="2009-04-21T17:05:00+04:00">21 апреля 2009</time></p></article><article class="b-article-excerpt h-entry"><h2 class=b-article-excerpt__title><i class=b-article-status></i><a class="u-url p-name" href="/2009/04/01/using-cucumber-with-fatory_girl-or-create_time_zone_conversion_attribute-epic-fail.html" rel=canonical>Совместное использование Cucumber и Factory_Girl или роковая ошибка create_time_zone_conversion_attribute?</a></h2><div class=p-content><p>Недавно открыл для себя <a title="Cucumber — making BDD fun!" href="http://cukes.info/">Cucumber</a> — утилиту для описания поведения вашего приложения. Весьма хорошая штука, доложу вам. Но о ней конкретно я расскажу как-нибудь потом.</p> <p>Ещё я использую вместо стендовых данных (известных также как fixtures) замечательный гем от <a href="http://thoughtbot.com/">ThoughtBot</a> под названием <a href="http://thoughtbot.com/projects/factory_girl">Factory Girl</a> — он позволяет делать «заготовки» моделей и ваще очень крут (о нём — как вы, может быть, уже догадались — тоже в другой раз).</p> <p>Но вот соединить их при тестировании одного проекта оказалось не так-то просто! При тестировании функционала каждый сценарий, начиная со второго использования метода Factory.create вылетал с ошибкой. Как показал бэктрэйс — ошибка случалась в функции ActiveRecord::Base.create_time_zone_conversion_attribute? Гугл рассказал мне, что разработчики рельсов <a href="https://rails.lighthouseapp.com/projects/8994/tickets/785-caching-models-fails-in-development">решают эту проблему</a> уже <a href="https://rails.lighthouseapp.com/projects/8994/tickets/1339">очень долго</a>, и хотя <a href="https://rails.lighthouseapp.com/attachments/60054/prevent_class_method_and_variable_nukeing_on_AR_reset_subclasses.diff">патч, решающий её</a>, давно найден — всё никак не вольют его в основной код. И на то есть веские причины, а именно — утечка <del>мозгов</del> <ins>памяти</ins> в production-режиме.</p> <p>Тем не менее, при тестировании функционала эта утечка памяти не так критична, потому как тестовый сервер Cucumber&#39;а запускается и останавливается регулярно — при каждом прогоне, а сервер приложения висит довольно долго и может отъесть довольно большой кусок памяти и подавиться им. Ну, надоели вступительные слова, вот… <h2>…решение проблемы:</h2> Необходимо поместить в директорию <code>lib</code> файл <code>activerecord_reset_sublass_fix.rb</code>, а так же добавить его вызов в файл <code>config/environments/test.rb</code> <a title="fix for create_time_zone_conversion_attribute? problem" href="http://gist.github.com/88826">следующим образом</a>: <script src="http://gist.github.com/88826.js"></script></p> </div><p class=b-article-excerpt__meta><span itemprop=author itemscope itemtype="http://schema.org/Person">© <a href="https://alex.semyonov.us/about/#me" itemprop=url><span itemprop=name>Алекс Семёнов</span></a>, </span><time class=dt-published datetime="2009-04-01T06:06:00+04:00">01 апреля 2009</time></p></article><article class="b-article-excerpt h-entry"><h2 class=b-article-excerpt__title><i class=b-article-status></i><a class="u-url p-name" href="/2009/02/09/ubuntu-compiz.html" rel=canonical>Ubuntu + Compiz — удобно и красиво!</a></h2><div class=p-content><p>Очень давно не писал в блог. Сегодня взглянул в очередной раз на черновики и решил, что буду их выкладывать потихоньку. Ну и что, что недописано (и вообще, пора менять слова «компиз фьюжн» на просто «компиз»). Будет рассказ по-частям :-)</p> <p>Расскажу о композитном менеджере окон <a href="http://compiz-fusion.org/" title="Compiz Fusion">Compiz Fusion</a>. Его историю можете прочитать на сайте проекта, а меня интересует конкретно его применение.</p> <p>Для начала, разберёмся, что же это вообще такое? Компиз — это менеджер окон, использующий для отрисовки OpenGL и повзоляющий производить над окнами всякие визуальные преобразования. За <a href="http://wiki.compiz-fusion.org/" title="Compiz Fusion Wiki">кратким обзором и скриншотами</a> опять отправляю на сайт проекта. А с теми, кого скриншоты уже порадовали, приступим к установке:</p> <pre><code class="bash">sudo apt-get update
sudo apt-get install compiz compizconfig-settings-manager simple-ccsm emerald fusion-icon
</code></pre> <p>После того, как всё установится, необходимо запустить Fusion Icon (Приложения → Системные → Compiz Fusion Icon). В вашем системном лотке (трее) появится иконка с логотипом Compiz Fusion (эдакий синенький кубик со стрелочкой). По нажатию на нём правой кнопкой выпадает менюшка, из которой вы можете выбрать менеджер окон (Select Window Manager), декоратор (Select Window Decorator), а так же быстро перезагрузить менеджер окон, изменить несколько параметров прямо из меню, либо открыть менеджер настроек Compiz Fusion (и офигеть от их обилия (-; ), а так же открыть менеджер тем Emerald. Советую сразу добавить это приложение в автозапуск (Система → Параметры → Сеансы → Добавить; Имя: Compiz Fusion Icon, Команда: fusion-icon, Комментарий: иконка для запуска и управления Compiz Fusion). Теперь, выбирайте менеджер окон Compiz и декоратор Emerald и мы быстро пробежимся по появившимся у вас возможностям. Кстати, когда вы впервые выберете Compiz в качестве менеджера, экран меркнёт и появится окошко с предложением сохранить настройки, но без&hellip; заголовка и кнопок закрытия. Не пугайтесь, согласитесь, оно хорошее (-; Заголовок появится буквально через пару-тройку секунд и останется с вами надолго (-;</p> <h2>С первого взгляда&hellip;</h2> <ul> <li><p>&hellip;мы увидим, что у панелей появились тени. Ну, это конечно круто, но не сильно увеличивает удобство пользования системой, да?</p> </li><li><p>Тогда нажмите на <kbd><kbd>Alt</kbd> + <kbd>Tab</kbd></kbd> и вы увидите, что стандартное переключение приложений заменено на новый, красивый, улучшенный переключатель, изображающий превьюшки запущенных приложений. Вы можете перематывать его и вперёд и назад (если нажимать <kbd><kbd>Alt</kbd> + <kbd>Shift</kbd> + <kbd>Tab</kbd></kbd> [Внимание!!! Данное утверждение верно в том, случае, если у вас не заняты системой кнопкосочетания <kbd><kbd>Alt</kbd> + <kbd>Shift</kbd></kbd> либо <kbd><kbd>Shift</kbd> + <kbd>Tab</kbd></kbd>]).</p> <p><img src="/2009/02/09/ubuntu-compiz/application-switcher-300x135.png" alt="Показывает уменьшенное окно приложения" title="Переключатель приложений показывает уменьшенные окна приложений"></p> <p>Кстати, если вы хотите пролистывать в переключателе также приложения, открытые на других ваших рабочих местах, добавьте <kbd><kbd>Ctrl</kbd></kbd> к описанным выше клавишам. Что же ещё интересного появилось у вас?</p> </li><li><p>Попробуйте нажать <kbd><kbd>Alt</kbd> + <kbd>Ctrl</kbd> + <kbd>→</kbd></kbd> или <kbd><kbd>Alt</kbd> + <kbd>Ctrl</kbd> + <kbd>←</kbd></kbd> и снова будете приятно удивлены (-: Переход на другое рабочее место будет очень плавным и симпатичным. Кроме того, вы можете одновременно переходить на другое рабочее место и тащить за собой туда же окно приложения, активное в данный момент. Для этого стоит всего-лишь зажать ещё и кнопку Shift (т.&nbsp;е. получится <kbd><kbd>Shift</kbd> + <kbd>Alt</kbd> + <kbd>Ctrl</kbd> + <kbd>→</kbd></kbd> или <kbd><kbd>Shift</kbd> + <kbd>Alt</kbd> + <kbd>Ctrl</kbd> + <kbd>←</kbd></kbd>). Остальные окна при этом останутся на своих местах. Если вам удобнее управляться с окнами мышкой (поначалу, у всех так, со временем вы можете изменить своё мнение), просто тащите окошко к правому краю экрана, и когда оно окажется за краем больше, чем наполовину, рабочая область сдвинется вправо, вслед за вашим окном.</p> </li><li><p>Продолжим далее. Допустим, мы поработали в нескольких приложениях на разных рабочих местах, и забыли, где же конкретно открыто окно&hellip; скажем, Пиджина. Стоит нажать <kbd><kbd>Super<sup id=fnref1><a href="#fn1" rel=footnote>1</a></sup></kbd> + <kbd>e</kbd></kbd> и ваше рабочее место отодвинется вглубь монитора так, что вы сможете увидеть сразу все рабочие места. Вы даже сможете передвигать окна между ними. Не верите? Просто попробуйте! (-;</p> <p><img src="/2009/02/09/ubuntu-compiz/expo-300x187.png" alt="Открытые приложения на всех рабочих местах" title="Экспозиция отображает открытые приложения на всех рабочих местах"></p> <p>Чтобы вернуться к какому-либо рабочему месту, вам нужно всего лишь щёлкнуть по нему мышкой. Или прокрутить скролл, пока оно не окажется подсвеченным. Или выбрать стрелочками. Чтобы вернуться на старое рабочее место, можете нажать Esc или щёлкнуть правой кнопкой мыши.</p> </li><li><p>Есть и другой способ быстро найти окно — нажать <kbd><kbd>Shift</kbd> + <kbd>Alt</kbd> + <kbd>↑</kbd></kbd>. При этом, на экране появятся все открытые вами окна, разбросанные мозайкой по всех поверхности экрана. Стрелками или мышкой вы можете выбрать любое из этих окон и после этого отпустить <kbd><kbd>Shift</kbd> + <kbd>Alt</kbd></kbd>.</p> <p><img src="/2009/02/09/ubuntu-compiz/scale-300x187.png" alt="Открытые приложения на всех рабочих местах" title="Окна всех запущенных приложений"></p> </li></ul> <div class=footnotes> <hr> <ol> <li id=fn1> <p>Если кто не знал, так линуксоиды называют кнопочку Win (с таким корявым окошком)&nbsp;<a href="#fnref1" rev=footnote>&#8617;</a></p> </li> </ol> </div> </div><p class=b-article-excerpt__meta><span itemprop=author itemscope itemtype="http://schema.org/Person">© <a href="https://alex.semyonov.us/about/#me" itemprop=url><span itemprop=name>Алекс Семёнов</span></a>, </span><time class=dt-published datetime="2009-02-09T03:03:00+03:00">09 февраля 2009</time></p></article></ul><nav itemscope itemtype="http://schema.org/SiteNavigationElement"><p><a href="/blog/page/2/" itemprop=url>Следующая страница</a></p></nav><p class=rss-subscribe>Подпишитесь на статьи с помощью <a href="/rss.xml" class="b-feed b-feed_rss">РСС <i class="fa fa-feed"></i></a> или <a href="/atom.xml" class="b-feed b-feed_atom">Атом <i class="fa fa-feed"></i></a>.</p></div><aside class=b-sidebar itemscope itemtype="http://schema.org/WPSideBar" role=complementary><section class=b-sidebar__recent id=recent><h2>Последние статьи</h2><ol class=b-articles-list><li class=b-article-item><time class=b-article-item__time datetime="2015-12-20T00:00:00+03:00" title="20 декабря 2015, 00:00">20 дек.</time><a href="/2015/12/20/manifest.html" class=b-article-item__title>Я-манифест</a></li><li class=b-article-item><time class=b-article-item__time datetime="2009-11-25T08:08:00+03:00" title="25 ноября 2009, 08:08">25 нояб.</time><a href="/2009/11/25/artlebedev-typograf-ruby-on-rails.html" class=b-article-item__title>Ставим рубиновый типограф на Рельсы</a></li><li class=b-article-item><time class=b-article-item__time datetime="2009-11-24T06:06:00+03:00" title="24 ноября 2009, 06:06">24 нояб.</time><a href="/2009/11/24/artlebedev-typograf-ruby.html" class=b-article-item__title>Типограф студии Артемия Лебедева с отблеском Рубина</a></li><li class=b-article-item><time class=b-article-item__time datetime="2009-09-30T13:01:00+04:00" title="30 сентября 2009, 13:01">30 сент.</time><a href="/2009/09/30/ruby-metaprogramming.html" class=b-article-item__title>Метапрограммирование в Ruby</a></li><li class=b-article-item><time class=b-article-item__time datetime="2009-09-15T20:08:00+04:00" title="15 сентября 2009, 20:08">15 сент.</time><a href="/2009/09/15/tinymce-integration-ruby-on-rails.html" class=b-article-item__title>Интеграция WYSiWYG-редактора TinyMCE в рельсовые приложения</a></li><li class=b-article-item><time class=b-article-item__time datetime="2009-08-03T21:09:00+04:00" title="03 августа 2009, 21:09">03 авг.</time><a href="/2009/08/03/setup-py-uninstall.html" class=b-article-item__title>Удаление программ с помощью setup.py</a></li><li class=b-article-item><time class=b-article-item__time datetime="2009-06-16T04:04:00+04:00" title="16 июня 2009, 04:04">16 июня</time><a href="/2009/06/16/ubuntu-price.html" class=b-article-item__title>Сколько стоит Ubuntu?</a></li><li class=b-article-item><time class=b-article-item__time datetime="2009-04-21T17:05:00+04:00" title="21 апреля 2009, 17:05">21 апр.</time><a href="/2009/04/21/rotuka-ubuntu-russian-translators.html" class=b-article-item__title>rotuka @ Ubuntu Russian Translators</a></li><li class=b-article-item><time class=b-article-item__time datetime="2009-04-01T06:06:00+04:00" title="01 апреля 2009, 06:06">01 апр.</time><a href="/2009/04/01/using-cucumber-with-fatory_girl-or-create_time_zone_conversion_attribute-epic-fail.html" class=b-article-item__title>Совместное использование Cucumber и Factory_Girl или роковая ошибка create_time_zone_conversion_attribute?</a></li><li class=b-article-item><time class=b-article-item__time datetime="2009-02-09T03:03:00+03:00" title="09 февраля 2009, 03:03">09 февр.</time><a href="/2009/02/09/ubuntu-compiz.html" class=b-article-item__title>Ubuntu + Compiz — удобно и красиво!</a></li></ol></section><section class=b-sidebar__keywords id=keywords><h2>Ключевые слова</h2><ol class=b-blog-keywords-list><li><a href="/tags/kommunikatsiya.html">коммуникация (1)</a></li><li><a href="/tags/emotsii.html">эмоции (1)</a></li><li><a href="/tags/psihologicheskie-gruppy.html">психологические группы (1)</a></li><li><a href="/tags/psihologicheskie-priyomy.html">психологические приёмы (1)</a></li><li><a href="/tags/ruby.html">Ruby (6)</a></li><li><a href="/tags/ruby-on-rails.html">Ruby on Rails (5)</a></li><li><a href="/tags/backend-development.html">Backend Development (2)</a></li><li><a href="/tags/studiya-artemiya-lebedeva.html">Студия Артемия Лебедева (2)</a></li><li><a href="/tags/tipografika.html">типографика (2)</a></li><li><a href="/tags/udobstvo.html">удобство (2)</a></li><li><a href="/tags/metaprogrammirovanie.html">Метапрограммирование (1)</a></li><li><a href="/tags/perevody.html">Переводы (2)</a></li><li><a href="/tags/programmirovanie.html">программирование (1)</a></li><li><a href="/tags/rubygems.html">RubyGems (2)</a></li><li><a href="/tags/tinymce.html">TinyMCE (1)</a></li><li><a href="/tags/wysiwyg.html">WYSIWYG (1)</a></li><li><a href="/tags/build.html">build (1)</a></li><li><a href="/tags/checkinstall.html">checkinstall (2)</a></li><li><a href="/tags/install.html">install (1)</a></li><li><a href="/tags/python.html">Python (1)</a></li><li><a href="/tags/setup-py.html">setup.py (1)</a></li><li><a href="/tags/uninstall.html">uninstall (1)</a></li><li><a href="/tags/pamyatka.html">памятка (1)</a></li><li><a href="/tags/ubuntu.html">Ubuntu (9)</a></li><li><a href="/tags/windows.html">Windows (1)</a></li><li><a href="/tags/os-x.html">OS X (1)</a></li><li><a href="/tags/openoffice.html">OpenOffice (1)</a></li><li><a href="/tags/koffice.html">KOffice (1)</a></li><li><a href="/tags/microsoft-office.html">Microsoft Office (1)</a></li><li><a href="/tags/iwork.html">iWork (1)</a></li><li><a href="/tags/gimp.html">GIMP (1)</a></li><li><a href="/tags/inkscape.html">Inkscape (1)</a></li><li><a href="/tags/photoshop.html">PhotoShop (1)</a></li><li><a href="/tags/l10n.html">l10n (1)</a></li><li><a href="/tags/ubuntu-loco-team.html">Ubuntu Loco Team (1)</a></li><li><a href="/tags/russkiy-yazyk.html">русский язык (1)</a></li><li><a href="/tags/cucumber.html">Cucumber (1)</a></li><li><a href="/tags/factory-girl.html">Factory Girl (1)</a></li><li><a href="/tags/compiz-fusion.html">Compiz Fusion (1)</a></li><li><a href="/tags/auto-apt.html">auto-apt (1)</a></li><li><a href="/tags/configure.html">configure (1)</a></li><li><a href="/tags/make.html">make (1)</a></li><li><a href="/tags/apache.html">Apache (1)</a></li><li><a href="/tags/mysql.html">MySQL (1)</a></li><li><a href="/tags/php.html">PHP (1)</a></li><li><a href="/tags/wacom-bamboo-one.html">Wacom Bamboo One (1)</a></li><li><a href="/tags/gtalk.html">GTalk (1)</a></li><li><a href="/tags/kde-4.html">KDE 4 (1)</a></li><li><a href="/tags/kopete.html">Kopete (1)</a></li><li><a href="/tags/this-week-in-rails.html">This Week in Rails (1)</a></li><li><a href="/tags/gnome-do.html">Gnome Do (1)</a></li></ol></section><section class=b-sidebar__archive id=years><h2>Архив блога</h2><ol class=b-blog-archive-list><li class=b-blog-archive-link><a href="/2015/12/">Декабрь 2015 г.</a> <span class=b-blog-archive-link__amount>(1)</span></li><li class=b-blog-archive-link><a href="/2009/11/">Ноябрь 2009 г.</a> <span class=b-blog-archive-link__amount>(2)</span></li><li class=b-blog-archive-link><a href="/2009/09/">Сентябрь 2009 г.</a> <span class=b-blog-archive-link__amount>(2)</span></li><li class=b-blog-archive-link><a href="/2009/08/">Август 2009 г.</a> <span class=b-blog-archive-link__amount>(1)</span></li><li class=b-blog-archive-link><a href="/2009/06/">Июнь 2009 г.</a> <span class=b-blog-archive-link__amount>(1)</span></li><li class=b-blog-archive-link><a href="/2009/04/">Апрель 2009 г.</a> <span class=b-blog-archive-link__amount>(2)</span></li><li class=b-blog-archive-link><a href="/2009/02/">Февраль 2009 г.</a> <span class=b-blog-archive-link__amount>(1)</span></li><li class=b-blog-archive-link><a href="/2008/11/">Ноябрь 2008 г.</a> <span class=b-blog-archive-link__amount>(1)</span></li><li class=b-blog-archive-link><a href="/2008/10/">Октябрь 2008 г.</a> <span class=b-blog-archive-link__amount>(2)</span></li><li class=b-blog-archive-link><a href="/2008/09/">Сентябрь 2008 г.</a> <span class=b-blog-archive-link__amount>(5)</span></li></ol></section></aside></div></div><div class=b-root__footer></div></div><footer class=b-root-footer><div class=b-footer><div class=b-footer__wrapper><div class=b-footer__columns><div class=b-footer__links><p id=copyrights>&copy;&nbsp;<a href="mailto:alex@semyonov.us?subject=RE%3A%20%D0%91%D0%BB%D0%BE%D0%B3&amp;body=https%3A%2F%2Falex.semyonov.us%2Fblog%2F">Алекс Семёнов</a>, 2016</p><ul class=b-footer-social><li class="b-social b-social_github"><a href="https://github.com/alsemyonov" target=_blank><i class=fa-github></i>alsemyonov</a></li><li class="b-social b-social_vk"><a href="https://vk.com/alsemyonov" target=_blank><i class=fa-vk></i>alsemyonov</a></li><li class="b-social b-social_twitter"><a href="https://twitter.com/alsemyonov" target=_blank><i class=fa-twitter></i>alsemyonov</a></li><li class="b-social b-social_facebook"><a href="https://facebook.com/alsemyonov" target=_blank><i class=fa-facebook></i>alsemyonov</a></li><li class="b-social b-social_instagram"><a href="https://instagram.com/alsemyonov" target=_blank><i class=fa-instagram></i>alsemyonov</a></li><li class="b-social b-social_foursquare"><a href="https://foursquare.com/alsemyonov" target=_blank><i class=fa-foursquare></i>alsemyonov</a></li></ul></div><div class=b-footer__disclaimer><p>Это личный сайт Алекса (Александра Семёнова). Я программирую, пишу статьи, организую мероприятия. Всё, что опубликовано на этом сайте, является моим личным мнением и соответствует <a href="/2015/12/20/manifest.html">я-манифесту</a>. </p><p>Если вы искали какую-то конкретную информацию, но не смогли её найти, попробуйте воспользоваться поиском Яндекса по этому сайту:</p><div class="ya-site-form ya-site-form_inited_no" onclick="return {'action':'http://alex.semyonov.us/search','arrow':true,'bg':'#ffcc00','fontsize':12,'fg':'#000000','language':'ru','logo':'rb','publicname':'Поиск по alex.semyonov.us','suggest':true,'target':'_self','tld':'ru','type':2,'usebigdictionary':true,'searchid':2252973,'input_fg':'#000000','input_bg':'#ffffff','input_fontStyle':'normal','input_fontWeight':'normal','input_placeholder':null,'input_placeholderColor':'#000000','input_borderColor':'#7f9db9'}"> <form action="https://yandex.ru/search/site/" method=get target=_self> <input type=hidden name=searchid value=2252973 /><input type=hidden name=l10n value=ru /><input type=hidden name=reqenc value=""/><input type=search name=text value=""/><input type=submit value="Найти"/> </form> </div> <style>.ya-page_js_yes .ya-site-form_inited_no { display: none; }</style> <script>(function (w, d, c) {
  var s = d.createElement('script'), h = d.getElementsByTagName('script')[0], e = d.documentElement;
  if ((' ' + e.className + ' ').indexOf(' ya-page_js_yes ') === -1) {
    e.className += ' ya-page_js_yes';
  }
  s.type = 'text/javascript';
  s.async = true;
  s.charset = 'utf-8';
  s.src = (d.location.protocol === 'https:' ? 'https:' : 'http:') + '//site.yandex.net/v2.0/js/all.js';
  h.parentNode.insertBefore(s, h);
  (w[c] || (w[c] = [])).push(function () {
    Ya.Site.Form.init()
  })
})(window, document, 'yandex_site_callbacks');</script> </div></div></div></div></footer> <script>
  (function (d, w, c) {
    (w[c] = w[c] || []).push(function() {
      try {
        w.yaCounter155095 = new Ya.Metrika({
          id:155095,
          clickmap:true,
          trackLinks:true,
          accurateTrackBounce:true,
          webvisor:true
        });
      } catch(e) { }
    });

    var n = d.getElementsByTagName("script")[0],
        s = d.createElement("script"),
        f = function () { n.parentNode.insertBefore(s, n); };
    s.type = "text/javascript";
    s.async = true;
    s.src = "https://mc.yandex.ru/metrika/watch.js";

    if (w.opera == "[object Opera]") {
      d.addEventListener("DOMContentLoaded", f, false);
    } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script> <noscript><div><img src="https://mc.yandex.ru/watch/155095" style="position:absolute; left:-9999px;" alt=""/></div></noscript> <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-1497958-5', 'auto');
  ga('send', 'pageview');
</script> <script id=dsq-count-scr src="//alsemyonovus.disqus.com/count.js" async></script> <span id=openstat1></span> <script>
  var openstat = { counter: 1, next: openstat };
  (function(d, t, p) {
    var j = d.createElement(t); j.async = true; j.type = "text/javascript";
    j.src = ("https:" == p ? "https:" : "http:") + "//openstat.net/cnt.js";
    var s = d.getElementsByTagName(t)[0]; s.parentNode.insertBefore(j, s);
  })(document, "script", document.location.protocol);
</script> <script src="https://static.yandex.net/yobject/v2/_/loader.js"></script><script src="https://yastatic.net/browser-updater/v1/script.js"></script><script src="/javascripts/screen.js"></script></body></html>